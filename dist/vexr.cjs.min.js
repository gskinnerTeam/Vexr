"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var asyncGenerator=function(){function e(e){this.value=e}function t(t){function n(e,t){return new Promise(function(n,a){var s={key:e,arg:t,resolve:n,reject:a,next:null};o?o=o.next=s:(i=o=s,r(e,t))})}function r(n,i){try{var o=t[n](i),s=o.value;s instanceof e?Promise.resolve(s.value).then(function(e){r("next",e)},function(e){r("throw",e)}):a(o.done?"return":"normal",o.value)}catch(e){a("throw",e)}}function a(e,t){switch(e){case"return":i.resolve({value:t,done:!0});break;case"throw":i.reject(t);break;default:i.resolve({value:t,done:!1})}i=i.next,i?r(i.key,i.arg):o=null}var i,o;this._invoke=n,"function"!=typeof t.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)},{wrap:function(e){return function(){return new t(e.apply(this,arguments))}},await:function(t){return new e(t)}}}(),classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),get$1=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in a)return a.value;var o=a.get;if(void 0!==o)return o.call(r)},inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},set$1=function e(t,n,r,a){var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);null!==o&&e(o,n,r,a)}else if("value"in i&&i.writable)i.value=r;else{var s=i.set;void 0!==s&&s.call(a,r)}return r},Convert=function(){function e(){classCallCheck(this,e)}return createClass(e,null,[{key:"RadiansToDegrees",value:function(e){return e*(180/Math.PI)}},{key:"DegreesToRadians",value:function(e){return e*(Math.PI/180)}},{key:"MapRange",value:function(e,t,n,r,a){return r+(a-r)*(e-t)/(n-t)}}]),e}(),Vector2=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;classCallCheck(this,e),this.raw=[t,n]}return createClass(e,null,[{key:"angleBetween",value:function(t,n){var r=t.magnitude()*n.magnitude(),a=e.dot(t,n);return Math.acos(a/r)}},{key:"lerp",value:function(t,n,r){var a=t.x+r*(n.x-t.x),i=t.y+r*(n.y-t.y);return new e(a,i)}},{key:"normalize",value:function(e){var t=e.get();return t.normalize(),t}},{key:"magnitude",value:function(t){return Math.sqrt(e.dot(t,t))}},{key:"add",value:function(t,n){return new e(t.x+n.x,t.y+n.y)}},{key:"subtract",value:function(t,n){var r=new e(n.x,n.y);return r.negate(),e.add(t,r)}},{key:"multiply",value:function(t,n){return new e(t.x*n,t.y*n)}},{key:"divide",value:function(t,n){return n=1/n,e.multiply(t,n)}},{key:"dot",value:function(e,t){return e.x*t.x+e.y*t.y}},{key:"dist",value:function(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}}]),createClass(e,[{key:"get",value:function(){return new e(this.x,this.y)}},{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.x=e,this.y=t}},{key:"multiply",value:function(e){this.x=this.x*e,this.y=this.y*e}},{key:"add",value:function(e){this.x=this.x+e.x,this.y=this.y+e.y}},{key:"subtract",value:function(t){var n=new e(t.x,t.y);n.negate(),this.add(n)}},{key:"divide",value:function(e){e=1/e,this.multiply(e)}},{key:"negate",value:function(){this.x=-this.x,this.y=-this.y}},{key:"clamp",value:function(e){this.x>e?this.x=e:this.x<0&&this.x<e&&(this.x=-e),this.y>e?this.y=e:this.y<0&&this.y<e&&(this.y=-e)}},{key:"limit",value:function(e){this.magnitude()>e&&(this.normalize(),this.multiply(e))}},{key:"rotate",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new e(0,0),r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=this.magnitude(),i=Convert.degreesToRadians(t),o=Math.cos(i),s=Math.sin(i);this.x=o*(this.x-n.x)+s*(this.y-n.y)+n.x,this.y=o*(this.y-n.y)-s*(this.x-n.x)+n.y,r&&(this.normalize(),this.multiply(a))}},{key:"magnitude",value:function(){return Math.sqrt(e.dot(this,this))}},{key:"normalize",value:function(){var e=this.magnitude();e>0&&this.divide(e)}},{key:"x",get:function(){return this.raw[0]},set:function(e){this.raw[0]=e}},{key:"y",get:function(){return this.raw[1]},set:function(e){this.raw[1]=e}},{key:"z",get:function(){return 0}}]),e}(),Vector3=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;classCallCheck(this,e),this.raw=new Float32Array(4),this.raw[0]=t,this.raw[1]=n,this.raw[2]=r,this.raw[3]=a}return createClass(e,null,[{key:"reset",value:function(e){e.set(0,0,0,0)}},{key:"angleBetween",value:function(t,n){var r=t.magnitude()*n.magnitude(),a=e.dot(t,n);return Math.acos(a/r)}},{key:"lerp",value:function(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new e;return a.set(t.raw[0]+r*(n.raw[0]-t.raw[0]),t.raw[1]+r*(n.raw[1]-t.raw[1]),t.raw[2]+r*(n.raw[2]-t.raw[2])),a}},{key:"normalize",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new e,r=t.get(n);return r.normalize(),r}},{key:"magnitude",value:function(t){return Math.sqrt(e.dot(t,t))}},{key:"add",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new e;return r.set(t.raw[0]+n.raw[0],t.raw[1]+n.raw[1],t.raw[2]+n.raw[2]),r}},{key:"subtract",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new e;return r.set(t.raw[0]-n.raw[0],t.raw[1]-n.raw[1],t.raw[2]-n.raw[2]),r}},{key:"multiply",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new e;return r.set(t.raw[0]*n,t.raw[1]*n,t.raw[2]*n),r}},{key:"divide",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new e;return n=1/n,r.set(t.raw[0]*n,t.raw[1]*n,t.raw[2]*n),r}},{key:"dot",value:function(e,t){return e.raw[0]*t.raw[0]+e.raw[1]*t.raw[1]+e.raw[2]*t.raw[2]}},{key:"cross",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new e;return r.set(t.raw[1]*n.raw[2]-n.raw[1]*t.raw[2],t.raw[2]*n.raw[0]-n.raw[2]*t.raw[0],t.raw[0]*n.raw[1]-n.raw[0]*t.raw[1]),r}},{key:"dist",value:function(e,t){var n=e.raw[0]-t.raw[0],r=e.raw[1]-t.raw[1],a=e.raw[2]-t.raw[2];return Math.sqrt(n*n+r*r+a*a)}}]),createClass(e,[{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new e;return t.set(this.raw[0],this.raw[1],this.raw[2],this.raw[3]),t}},{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.raw[0]=e,this.raw[1]=t,this.raw[2]=n,this.raw[3]=r}},{key:"multiply",value:function(t){e.multiply(this,t,this)}},{key:"add",value:function(t){e.add(this,t,this)}},{key:"subtract",value:function(t){e.subtract(this,t,this)}},{key:"divide",value:function(t){e.divide(this,t,this)}},{key:"negate",value:function(){this.raw[0]=-this.raw[0],this.raw[1]=-this.raw[1],this.raw[2]=-this.raw[2]}},{key:"clamp",value:function(e){this.raw[0]>e?this.raw[0]=e:this.raw[0]<0&&this.raw[0]<e&&(this.raw[0]=-e),this.raw[1]>e?this.raw[1]=e:this.raw[1]<0&&this.raw[1]<e&&(this.raw[1]=-e),this.raw[2]>e?this.raw[2]=e:this.raw[2]<0&&this.raw[2]<e&&(this.raw[2]=-e)}},{key:"limit",value:function(e){this.magnitude()>e&&(this.normalize(),this.multiply(e))}},{key:"rotate",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new e,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=this.magnitude(),i=Convert.DegreesToRadians(t),o=Math.cos(i),s=Math.sin(i);this.raw[0]=o*(this.raw[0]-n.x)+s*(this.raw[1]-n.y)+n.x,this.raw[1]=o*(this.raw[1]-n.y)-s*(this.raw[0]-n.x)+n.y,r&&(this.normalize(),this.multiply(a))}},{key:"magnitude",value:function(){return Math.sqrt(e.dot(this,this))}},{key:"normalize",value:function(){var e=this.magnitude();e>0&&this.divide(e)}},{key:"x",get:function(){return this.raw[0]},set:function(e){this.raw[0]=e}},{key:"y",get:function(){return this.raw[1]},set:function(e){this.raw[1]=e}},{key:"z",get:function(){return this.raw[2]},set:function(e){this.raw[2]=e}},{key:"w",get:function(){return this.raw[3]},set:function(e){this.raw[3]=e}}]),e}(),Matrix3=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[1,0,0,0,1,0,0,0,1];classCallCheck(this,e),this.raw=new Float32Array(t)}return createClass(e,[{key:"setMatrix",value:function(e){this.raw=e}},{key:"multiply",value:function(t){var n=e.multiply(this,t);this.raw=n.raw}},{key:"column1",get:function(){return[this.raw[0],this.raw[3],this.raw[6]]},set:function(e){this.raw[0]=e[0],this.raw[3]=e[1],this.raw[6]=e[2]}},{key:"column2",get:function(){return[this.raw[1],this.raw[4],this.raw[7]]},set:function(e){this.raw[1]=e[0],this.raw[4]=e[1],this.raw[7]=e[2]}},{key:"column3",get:function(){return[this.raw[2],this.raw[5],this.raw[8]]},set:function(e){this.raw[2]=e[0],this.raw[5]=e[1],this.raw[68]=e[2]}},{key:"row1",get:function(){return[this.raw[0],this.raw[1],this.raw[2]]},set:function(e){this.raw[0]=e[0],this.raw[1]=e[1],this.raw[2]=e[2]}},{key:"row2",get:function(){return[this.raw[3],this.raw[4],this.raw[5]]},set:function(e){this.raw[3]=e[0],this.raw[4]=e[1],this.raw[5]=e[2]}},{key:"row3",get:function(){return[this.raw[6],this.raw[7],this.raw[8]]},set:function(e){this.raw[6]=e[0],this.raw[7]=e[1],this.raw[8]=e[2]}}],[{key:"dot",value:function(e,t){var n=e[0]*t[0]+e[1]*t[1]+e[2]*t[2];return console.log(n),n}},{key:"multiply",value:function(t,n){var r=new Float32Array(9);r[0]=e.dot(t.column1,n.row1),r[1]=e.dot(t.column2,n.row1),r[2]=e.dot(t.column3,n.row1),r[3]=e.dot(t.column1,n.row2),r[4]=e.dot(t.column2,n.row2),r[5]=e.dot(t.column3,n.row2),r[6]=e.dot(t.column1,n.row3),r[7]=e.dot(t.column2,n.row3),r[8]=e.dot(t.column3,n.row3);var a=new e;return a.setMatrix(r),a}}]),e}(),Matrix4=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.identity();classCallCheck(this,e),this.setMatrix(t)}return createClass(e,[{key:"setMatrix",value:function(e){this.raw=e}},{key:"transpose",value:function(){var e=[this.raw[0],this.raw[1],this.raw[2],this.raw[3]],t=[this.raw[4],this.raw[5],this.raw[6],this.raw[7]],n=[this.raw[8],this.raw[9],this.raw[10],this.raw[11]],r=[this.raw[12],this.raw[13],this.raw[14],this.raw[15]];this.raw[0]=e[0],this.raw[4]=e[1],this.raw[8]=e[2],this.raw[12]=e[3],this.raw[1]=t[0],this.raw[5]=t[1],this.raw[9]=t[2],this.raw[13]=t[3],this.raw[2]=n[0],this.raw[6]=n[1],this.raw[10]=n[2],this.raw[14]=n[3],this.raw[3]=r[0],this.raw[7]=r[1],this.raw[11]=r[2],this.raw[15]=r[3]}},{key:"multiply",value:function(t){e.multiply(this,t,this)}}],[{key:"identity",value:function(){return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},{key:"dot",value:function(e,t,n,r,a,i,o,s){return e*a+t*i+n*o+r*s}},{key:"multiply",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new e,a=new Float32Array(16);return a[0]=e.dot(t.raw[0],t.raw[4],t.raw[8],t.raw[12],n.raw[0],n.raw[1],n.raw[2],n.raw[3]),a[1]=e.dot(t.raw[1],t.raw[5],t.raw[9],t.raw[13],n.raw[0],n.raw[1],n.raw[2],n.raw[3]),a[2]=e.dot(t.raw[2],t.raw[6],t.raw[10],t.raw[14],n.raw[0],n.raw[1],n.raw[2],n.raw[3]),a[3]=e.dot(t.raw[3],t.raw[7],t.raw[11],t.raw[15],n.raw[0],n.raw[1],n.raw[2],n.raw[3]),a[4]=e.dot(t.raw[0],t.raw[4],t.raw[8],t.raw[12],n.raw[4],n.raw[5],n.raw[6],n.raw[7]),a[5]=e.dot(t.raw[1],t.raw[5],t.raw[9],t.raw[13],n.raw[4],n.raw[5],n.raw[6],n.raw[7]),a[6]=e.dot(t.raw[2],t.raw[6],t.raw[10],t.raw[14],n.raw[4],n.raw[5],n.raw[6],n.raw[7]),a[7]=e.dot(t.raw[3],t.raw[7],t.raw[11],t.raw[15],n.raw[4],n.raw[5],n.raw[6],n.raw[7]),a[8]=e.dot(t.raw[0],t.raw[4],t.raw[8],t.raw[12],n.raw[8],n.raw[9],n.raw[10],n.raw[11]),a[9]=e.dot(t.raw[1],t.raw[5],t.raw[9],t.raw[13],n.raw[8],n.raw[9],n.raw[10],n.raw[11]),a[10]=e.dot(t.raw[2],t.raw[6],t.raw[10],t.raw[14],n.raw[8],n.raw[9],n.raw[10],n.raw[11]),a[11]=e.dot(t.raw[3],t.raw[7],t.raw[11],t.raw[15],n.raw[8],n.raw[9],n.raw[10],n.raw[11]),a[12]=e.dot(t.raw[0],t.raw[4],t.raw[8],t.raw[12],n.raw[12],n.raw[13],n.raw[14],n.raw[15]),a[13]=e.dot(t.raw[1],t.raw[5],t.raw[9],t.raw[13],n.raw[12],n.raw[13],n.raw[14],n.raw[15]),a[14]=e.dot(t.raw[2],t.raw[6],t.raw[10],t.raw[14],n.raw[12],n.raw[13],n.raw[14],n.raw[15]),a[15]=e.dot(t.raw[3],t.raw[7],t.raw[11],t.raw[15],n.raw[12],n.raw[13],n.raw[14],n.raw[15]),r.setMatrix(a),r}},{key:"multiplyVector",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Vector3;return n.set(t[0]*e.raw[0],t[1]*e.raw[1],t[2]*e.raw[2],t[3]*e.raw[3],t[4]*e.raw[0],t[5]*e.raw[1],t[6]*e.raw[2],t[7]*e.raw[3],t[8]*e.raw[0],t[9]*e.raw[1],t[10]*e.raw[2],t[11]*e.raw[3],t[12]*e.raw[0],t[13]*e.raw[1],t[14]*e.raw[2],t[15]*e.raw[3]),n}},{key:"translate",value:function(e){}},{key:"scale",value:function(e){}}]),e}(),hexString="0123456789abcdef",Generate=function(){function e(){classCallCheck(this,e)}return createClass(e,null,[{key:"RandomHexString",value:function(e){for(var t="",n=0;n<e;n++)t+=hexString.substr(Math.floor(Math.random()*hexString.length),1);return t}},{key:"UUID",value:function(){return e.RandomHexString(8)+"-"+e.RandomHexString(4)+"-"+e.RandomHexString(4)+"-"+e.RandomHexString(4)+"-"+e.RandomHexString(12)}}]),e}(),pools=new Object,objectPool=new Object,usagePool=new Object,clean=new Object,Pool=function(){function e(){classCallCheck(this,e)}return createClass(e,null,[{key:"allocate",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return e};if(e.hasOwnProperty("prototype")){pools[t]={object:e,objectKey:t,amount:n,cleaner:r},clean[t]=r,usagePool[t]=[],objectPool[t]=[];for(var a=0;a<n;a++){var i=new e;i.v_pool_index=a,i.v_pool_key=t,usagePool[t][a]=!1,objectPool[t][a]=i}return objectPool[t]}throw new Error("Object must have a constructor")}},{key:"deallocate",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];0==e.referencesInPool(t)||1==n?(delete clean[t],delete usagePool[t],delete objectPool[t],delete pools[t]):console.warn("You still have objects in this pool checked out. Return them and call deallocate. Or use deallocate(key, true) to force deallocation.")}},{key:"referencesInPool",value:function(t){return pools[t].amount-e.poolsize(t)}},{key:"poolsize",value:function(t){return objectPool[t].filter(e.notInUse).length}},{key:"inUse",value:function(e){return usagePool[e.v_pool_key][e.v_pool_index]}},{key:"notInUse",value:function(e){return!usagePool[e.v_pool_key][e.v_pool_index]}},{key:"returnAll",value:function(t){for(var n=objectPool[t].filter(e.inUse),r=0;r<n.length;r++)e.returnObject(n[r])}},{key:"getObject",value:function(e){var t=usagePool[e].indexOf(!1);if(usagePool[e][t]=!0,t>-1)return objectPool[e][t];throw new Error("Out of objects")}},{key:"returnObject",value:function(e){clean[e.v_pool_key](e),usagePool[e.v_pool_key][e.v_pool_index]=!1}},{key:"returnObjects",value:function(t){for(var n=0;n<t.length;n++)e.returnObject(t[n])}},{key:"Pools",get:function(){return pools}}]),e}(),listeners={},EventLite=function(){function e(){classCallCheck(this,e)}return createClass(e,null,[{key:"on",value:function(e,t){return void 0===listeners[e]?listeners[e]=[t]:listeners[e].push(t),t}},{key:"off",value:function(e,t){if(listeners[e])for(var n=listeners[e].length-1;n>=0;n--){if(1!==listeners[e].length){listeners[e].splice(n,1);break}delete listeners[e]}}},{key:"trigger",value:function(e){if(listeners[e]){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=listeners[e].length-1;a>=0;a--)if(void 0!==listeners[e]){if("function"!=typeof listeners[e][a]||!listeners[e][a])throw"Event handler is not a function.";listeners[e][a](n)}}}},{key:"unbindAll",value:function(){for(var e in listeners)delete listeners[e];return!0}}]),e}(),resizeId,resizeEvent,Screen=function(){function e(){classCallCheck(this,e)}return createClass(e,null,[{key:"resize",value:function(t){clearTimeout(resizeId),resizeEvent=t,resizeId=setTimeout(e.recalculate,e.resizeDelay)}},{key:"recalculate",value:function(){e.dimensions.set(window.innerWidth,window.innerHeight),e.dimensions.x>e.dimensions.y?e.orientation="landscape":e.orientation="portrait";for(var t in e.anchors)e.anchors.hasOwnProperty(t)&&e.anchorPositions[t].set(e.anchors[t].x*e.dimensions.x,e.anchors[t].y*e.dimensions.y);EventLite.trigger("resize",resizeEvent)}},{key:"getAnchor",value:function(t){return e.anchorPositions[t].get()}},{key:"setAnchor",value:function(t,n,r){void 0==e.anchors[t]?(e.anchors[t]=new Vector3(n,r),e.anchorPositions[t]=new Vector3(e.anchors[t].x*e.dimensions.x,e.anchors[t].y*e.dimensions.y)):(e.anchors[t].set(n,r),e.anchorPositions[t].set(e.anchors[t].x*e.dimensions.x,e.anchors[t].y*e.dimensions.y))}},{key:"removeAnchor",value:function(t){delete e.anchors[t],delete e.anchorPositions[t]}},{key:"init",value:function(){e.resizeDelay=100,e.anchors={},e.anchorPositions={},e.dimensions=new Vector3(window.innerWidth,window.innerHeight),e.setAnchor("center",.5,.5),e.dimensions.x>e.dimensions.y?e.orientation="landscape":e.orientation="portrait"}},{key:"dimensions",get:function(){return e._dimensions},set:function(t){e._dimensions!=t&&(e._dimensions=t)}},{key:"orientation",get:function(){return e._orientation},set:function(t){e._orientation!=t&&(e._orientation=t)}},{key:"center",get:function(){return e._center},set:function(t){e._center!=t&&(e._center=t)}},{key:"resizeDelay",get:function(){return e._resizeDelay},set:function(t){e._resizeDelay!=t&&(e._resizeDelay=t)}},{key:"anchors",get:function(){return e._anchors},set:function(t){e._anchors!=t&&(e._anchors=t)}},{key:"anchorPositions",get:function(){return e._anchorPositions},set:function(t){e._anchorPositions!=t&&(e._anchorPositions=t)}},{key:"width",get:function(){return e._dimensions.x}},{key:"height",get:function(){return e._dimensions.y}}]),e}();Screen.init();var key=Generate.UUID(),Behavior=function(){function e(){classCallCheck(this,e)}return createClass(e,null,[{key:"init",value:function(){Pool.allocate(Vector3,key,10,Vector3.reset)}},{key:"seek",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=Pool.getObject(key),a=Pool.getObject(key);Vector3.subtract(t,e.location,r),r.normalize(),r.multiply(e.maxSpeed),Vector3.subtract(r,e.velocity,a),a.limit(e.maxForce),a.multiply(n),e.addForce(a),Pool.returnObject(r),Pool.returnObject(a)}},{key:"arrive",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=Pool.getObject(key),i=Pool.getObject(key);Vector3.subtract(t,e.location,a);var o=Convert.MapRange(a.magnitude(),0,n,0,e.maxSpeed);a.normalize(),a.multiply(o),Vector3.subtract(a,e.velocity,i),i.limit(e.maxForce),i.multiply(r),e.addForce(i),Pool.returnObject(a),Pool.returnObject(i)}},{key:"avoidAll",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:80,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=Pool.getObject(key),i=Pool.getObject(key),o=Pool.getObject(key),s=0,l=0;l<t.length;l++){var u=t[l],c=Vector3.dist(e.location,u.location);c>0&&c<n&&e.id!=u.id&&(Vector3.subtract(e.location,u.location,a),a.normalize(),a.divide(c),o.add(a),s++)}s>0&&(o.divide(s),o.normalize(),o.multiply(e.maxSpeed),Vector3.subtract(o,e.velocity,i),i.limit(e.maxForce),i.multiply(r),e.addForce(i)),Pool.returnObject(a),Pool.returnObject(i),Pool.returnObject(o)}},{key:"avoid",value:function(e,t,n){this.avoidAll(e,[t],n)}},{key:"constrain",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Screen.width,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Screen.height,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;t-=i,r+=i,n-=i,a+=i,e.location.x<t&&(e.velocity.x*=-1,e.location.x=t),e.location.y<n&&(e.velocity.y*=-1,e.location.y=n),e.location.x>r&&(e.velocity.x*=-1,e.location.x=r),e.location.y>a&&(e.velocity.y*=-1,e.location.y=a)}},{key:"wrap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Screen.width,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Screen.height,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;t-=i,r+=i,n-=i,a+=i,e.location.x<t&&(e.location.x=r),e.location.y<n&&(e.location.y=a),e.location.x>r&&(e.location.x=t),e.location.y>a&&(e.location.y=n)}},{key:"disableOutside",value:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;t-=i,r+=i,n-=i,a+=i,(e.location.x<t||e.location.y<n||e.location.x>r||e.location.y>a)&&(e.active=!1,e.visible=!1)}},{key:"destroyOutside",value:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;t-=i,r+=i,n-=i,a+=i,(e.location.x<t||e.location.y<n||e.location.x>r||e.location.y>a)&&(e.dead=!0)}}]),e}();Behavior.init();var Actor=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Actor",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Vector3(0,0,0);classCallCheck(this,e),this.type=t,this.active=!0,this.visible=!0,this.dead=!1,this.id=Generate.UUID(),this.location=n,this.velocity=new Vector3(0,0,0),this.acceleration=new Vector3(0,0,0),this.angle=0,this.maxSpeed=15,this.maxForce=1}return createClass(e,[{key:"addForce",value:function(e){this.acceleration.add(e)}},{key:"update",value:function(){this.active&&(this.move(),this.velocity.add(this.acceleration),this.location.add(this.velocity),this.acceleration.set(0,0,0))}},{key:"move",value:function(){}},{key:"render",value:function(){this.visible&&this.draw()}},{key:"draw",value:function(){}},{key:"destroy",value:function(){this.dead=!0}}]),e}(),DOMActor=function(e){function t(e,n){classCallCheck(this,t);var r=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.element=document.createElement("div"),r.element.classList.add("actor"),r.element.classList.add(e),r.parentElement=null,r}return inherits(t,e),createClass(t,[{key:"addToParentElement",value:function(e){this.parentElement=e,this.parentElement.appendChild(this.element)}},{key:"draw",value:function(){this.element.style.transform="translateX("+this.location.x+"px) translateY("+this.location.y+"px) rotate("+this.angle+"deg)"}},{key:"destroy",value:function(){this.dead=!0,this.element.remove(),this.parentElement=null}}]),t}(Actor),GameLoop=function(){function e(){classCallCheck(this,e),this.gameObjects=[],this.controller=[]}return createClass(e,[{key:"setController",value:function(e){this.controller.push(e)}},{key:"getType",value:function(e){for(var t=[],n=0;n<this.gameObjects.length;n++)this.gameObjects[n].type===e&&t.push(this.gameObjects[n]);return t}},{key:"update",value:function(){this.removeActors();for(var e=0;e<this.gameObjects.length;e++)this.gameObjects[e].update()}},{key:"addActor",value:function(e){this.gameObjects.push(e)}},{key:"removeActors",value:function(){for(var e=0;e<this.gameObjects.length;e++)this.gameObjects[e].dead&&this.gameObjects.splice(e,1)}},{key:"render",value:function(){for(var e=0;e<this.gameObjects.length;e++)this.gameObjects[e].render()}},{key:"loop",value:function(){this.update(),this.render(),window.requestAnimationFrame(this.loop.bind(this))}}]),e}(),InputController=function(){function e(){classCallCheck(this,e),this.keyMap={},this.mousePos=new Vector3}return createClass(e,[{key:"bindEvents",value:function(){document.addEventListener("mouseup",this.setMouseUp.bind(this)),document.addEventListener("mousedown",this.setMouseDown.bind(this)),document.addEventListener("mousemove",this.setMousePos.bind(this)),onkeydown=onkeyup=this.mapKeys.bind(this)}},{key:"unbindEvents",value:function(){document.removeEventListener("mouseup",this.setMouseUp.bind(this)),document.removeEventListener("mousedown",this.setMouseDown.bind(this)),document.removeEventListener("mousemove",this.setMousePos.bind(this)),onkeydown=onkeyup=null}},{key:"setMousePos",value:function(e){this.mousePos.set(e.pageX,e.pageY)}},{key:"setMouseUp",value:function(e){var t={key:"mouse"+e.button,type:"keyup"};this.mapKeys(t)}},{key:"setMouseDown",value:function(e){var t={key:"mouse"+e.button,type:"keydown"};this.mapKeys(t)}},{key:"mapKeys",value:function(e){e=e||event,this.keyMap[e.key]="keydown"==e.type}},{key:"keyUp",value:function(e){console.log(e)}},{key:"keyDown",value:function(e){console.log(e)}},{key:"setKeys",value:function(){for(var e in this.keyMap)this.keyMap[e]?this.keyDown(e):this.keyUp(e)}}]),e}();exports.Vector2=Vector2,exports.Vector3=Vector3,exports.Matrix3=Matrix3,exports.Matrix4=Matrix4,exports.Behaviors=Behavior,exports.Actor=Actor,exports.DOMActor=DOMActor,exports.GameLoop=GameLoop,exports.Screen=Screen,exports.InputController=InputController,exports.EventLite=EventLite,exports.Pool=Pool,exports.Convert=Convert,exports.Generate=Generate;