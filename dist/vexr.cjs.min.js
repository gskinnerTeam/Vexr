"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var asyncGenerator=function(){function t(t){this.value=t}function e(e){function r(t,e){return new Promise(function(r,a){var s={key:t,arg:e,resolve:r,reject:a,next:null};o?o=o.next=s:(i=o=s,n(t,e))})}function n(r,i){try{var o=e[r](i),s=o.value;s instanceof t?Promise.resolve(s.value).then(function(t){n("next",t)},function(t){n("throw",t)}):a(o.done?"return":"normal",o.value)}catch(t){a("throw",t)}}function a(t,e){switch(t){case"return":i.resolve({value:e,done:!0});break;case"throw":i.reject(e);break;default:i.resolve({value:e,done:!1})}i=i.next,i?n(i.key,i.arg):o=null}var i,o;this._invoke=r,"function"!=typeof e.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)},{wrap:function(t){return function(){return new e(t.apply(this,arguments))}},await:function(e){return new t(e)}}}(),classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},createClass=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),get$1=function t(e,r,n){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,r);if(void 0===a){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,r,n)}if("value"in a)return a.value;var o=a.get;if(void 0!==o)return o.call(n)},inherits=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},possibleConstructorReturn=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},set$1=function t(e,r,n,a){var i=Object.getOwnPropertyDescriptor(e,r);if(void 0===i){var o=Object.getPrototypeOf(e);null!==o&&t(o,r,n,a)}else if("value"in i&&i.writable)i.value=n;else{var s=i.set;void 0!==s&&s.call(a,n)}return n},Convert=function(){function t(){classCallCheck(this,t)}return createClass(t,null,[{key:"RadiansToDegrees",value:function(t){return t*(180/Math.PI)}},{key:"DegreesToRadians",value:function(t){return t*(Math.PI/180)}},{key:"MapRange",value:function(t,e,r,n,a){return n+(a-n)*(t-e)/(r-e)}}]),t}(),Vector2=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;classCallCheck(this,t),this.raw=[e,r]}return createClass(t,null,[{key:"angleBetween",value:function(e,r){var n=e.magnitude()*r.magnitude(),a=t.dot(e,r);return Math.acos(a/n)}},{key:"lerp",value:function(e,r,n){var a=e.x+n*(r.x-e.x),i=e.y+n*(r.y-e.y);return new t(a,i)}},{key:"normalize",value:function(t){var e=t.get();return e.normalize(),e}},{key:"magnitude",value:function(e){return Math.sqrt(t.dot(e,e))}},{key:"add",value:function(e,r){return new t(e.x+r.x,e.y+r.y)}},{key:"subtract",value:function(e,r){var n=new t(r.x,r.y);return n.negate(),t.add(e,n)}},{key:"multiply",value:function(e,r){return new t(e.x*r,e.y*r)}},{key:"divide",value:function(e,r){return r=1/r,t.multiply(e,r)}},{key:"dot",value:function(t,e){return t.x*e.x+t.y*e.y}},{key:"dist",value:function(t,e){var r=t.x-e.x,n=t.y-e.y;return Math.sqrt(r*r+n*n)}}]),createClass(t,[{key:"get",value:function(){return new t(this.x,this.y)}},{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.x=t,this.y=e}},{key:"multiply",value:function(t){this.x=this.x*t,this.y=this.y*t}},{key:"add",value:function(t){this.x=this.x+t.x,this.y=this.y+t.y}},{key:"subtract",value:function(e){var r=new t(e.x,e.y);r.negate(),this.add(r)}},{key:"divide",value:function(t){t=1/t,this.multiply(t)}},{key:"negate",value:function(){this.x=-this.x,this.y=-this.y}},{key:"clamp",value:function(t){this.x>t?this.x=t:this.x<0&&this.x<t&&(this.x=-t),this.y>t?this.y=t:this.y<0&&this.y<t&&(this.y=-t)}},{key:"limit",value:function(t){this.magnitude()>t&&(this.normalize(),this.multiply(t))}},{key:"rotate",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new t(0,0),n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=this.magnitude(),i=Convert.degreesToRadians(e),o=Math.cos(i),s=Math.sin(i);this.x=o*(this.x-r.x)+s*(this.y-r.y)+r.x,this.y=o*(this.y-r.y)-s*(this.x-r.x)+r.y,n&&(this.normalize(),this.multiply(a))}},{key:"magnitude",value:function(){return Math.sqrt(t.dot(this,this))}},{key:"normalize",value:function(){var t=this.magnitude();t>0&&this.divide(t)}},{key:"x",get:function(){return this.raw[0]},set:function(t){this.raw[0]=t}},{key:"y",get:function(){return this.raw[1]},set:function(t){this.raw[1]=t}},{key:"z",get:function(){return 0}}]),t}(),Vector3=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;classCallCheck(this,t),this.raw=new Float32Array(4),this.raw[0]=e,this.raw[1]=r,this.raw[2]=n,this.raw[3]=a}return createClass(t,null,[{key:"reset",value:function(t){t.set(0,0,0,0)}},{key:"angleBetween",value:function(e,r){var n=e.magnitude()*r.magnitude(),a=t.dot(e,r);return Math.acos(a/n)}},{key:"lerp",value:function(e,r,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new t;return a.set(e.raw[0]+n*(r.raw[0]-e.raw[0]),e.raw[1]+n*(r.raw[1]-e.raw[1]),e.raw[2]+n*(r.raw[2]-e.raw[2])),a}},{key:"normalize",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new t,n=e.get(r);return n.normalize(),n}},{key:"magnitude",value:function(e){return Math.sqrt(t.dot(e,e))}},{key:"add",value:function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new t;return n.raw[0]=e.raw[0]+r.raw[0],n.raw[1]=e.raw[1]+r.raw[1],n.raw[2]=e.raw[2]+r.raw[2],n}},{key:"subtract",value:function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new t;return n.raw[0]=e.raw[0]-r.raw[0],n.raw[1]=e.raw[1]-r.raw[1],n.raw[2]=e.raw[2]-r.raw[2],n}},{key:"multiply",value:function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new t;return n.raw[0]=e.raw[0]*r,n.raw[1]=e.raw[1]*r,n.raw[2]=e.raw[2]*r,n}},{key:"divide",value:function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new t;return r=1/r,n.raw[0]=e.raw[0]*r,n.raw[1]=e.raw[1]*r,n.raw[2]=e.raw[2]*r,n}},{key:"dot",value:function(t,e){return t.raw[0]*e.raw[0]+t.raw[1]*e.raw[1]+t.raw[2]*e.raw[2]}},{key:"cross",value:function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new t;return e.raw[0]=e.raw[1]*r.raw[2]-r.raw[1]*e.raw[2],e.raw[1]=e.raw[2]*r.raw[0]-r.raw[2]*e.raw[0],e.raw[2]=e.raw[0]*r.raw[1]-r.raw[0]*e.raw[1],n}},{key:"dist",value:function(t,e){var r=t.raw[0]-e.raw[0],n=t.raw[1]-e.raw[1],a=t.raw[2]-e.raw[2];return Math.sqrt(r*r+n*n+a*a)}}]),createClass(t,[{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new t;return e.set(this.raw[0],this.raw[1],this.raw[2],this.raw[3]),e}},{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.raw[0]=t,this.raw[1]=e,this.raw[2]=r,this.raw[3]=n}},{key:"multiply",value:function(e){t.multiply(this,e,this)}},{key:"add",value:function(e){t.add(this,e,this)}},{key:"subtract",value:function(e){t.subtract(this,e,this)}},{key:"divide",value:function(e){t.divide(this,e,this)}},{key:"negate",value:function(){this.raw[0]=-this.raw[0],this.raw[1]=-this.raw[1],this.raw[2]=-this.raw[2]}},{key:"clamp",value:function(t){this.raw[0]>t?this.raw[0]=t:this.raw[0]<0&&this.raw[0]<t&&(this.raw[0]=-t),this.raw[1]>t?this.raw[1]=t:this.raw[1]<0&&this.raw[1]<t&&(this.raw[1]=-t),this.raw[2]>t?this.raw[2]=t:this.raw[2]<0&&this.raw[2]<t&&(this.raw[2]=-t)}},{key:"limit",value:function(t){this.magnitude()>t&&(this.normalize(),this.multiply(t))}},{key:"rotate",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.zero,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n)var a=this.magnitude();var i=Convert.DegreesToRadians(e),o=Math.cos(i),s=Math.sin(i);this.raw[0]=o*(this.raw[0]-r.x)+s*(this.raw[1]-r.y)+r.x,this.raw[1]=o*(this.raw[1]-r.y)-s*(this.raw[0]-r.x)+r.y,n&&(this.normalize(),this.multiply(a))}},{key:"magnitude",value:function(){return Math.sqrt(t.dot(this,this))}},{key:"normalize",value:function(){var t=this.magnitude();t>0&&this.divide(t)}},{key:"x",get:function(){return this.raw[0]},set:function(t){this.raw[0]=t}},{key:"y",get:function(){return this.raw[1]},set:function(t){this.raw[1]=t}},{key:"z",get:function(){return this.raw[2]},set:function(t){this.raw[2]=t}},{key:"w",get:function(){return this.raw[3]},set:function(t){this.raw[3]=t}}]),t}();Vector3.zero=new Vector3;var Matrix3=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[1,0,0,0,1,0,0,0,1];classCallCheck(this,t),this.raw=new Float32Array(e)}return createClass(t,[{key:"setMatrix",value:function(t){this.raw=t}},{key:"multiply",value:function(e){var r=t.multiply(this,e);this.raw=r.raw}},{key:"column1",get:function(){return[this.raw[0],this.raw[3],this.raw[6]]},set:function(t){this.raw[0]=t[0],this.raw[3]=t[1],this.raw[6]=t[2]}},{key:"column2",get:function(){return[this.raw[1],this.raw[4],this.raw[7]]},set:function(t){this.raw[1]=t[0],this.raw[4]=t[1],this.raw[7]=t[2]}},{key:"column3",get:function(){return[this.raw[2],this.raw[5],this.raw[8]]},set:function(t){this.raw[2]=t[0],this.raw[5]=t[1],this.raw[68]=t[2]}},{key:"row1",get:function(){return[this.raw[0],this.raw[1],this.raw[2]]},set:function(t){this.raw[0]=t[0],this.raw[1]=t[1],this.raw[2]=t[2]}},{key:"row2",get:function(){return[this.raw[3],this.raw[4],this.raw[5]]},set:function(t){this.raw[3]=t[0],this.raw[4]=t[1],this.raw[5]=t[2]}},{key:"row3",get:function(){return[this.raw[6],this.raw[7],this.raw[8]]},set:function(t){this.raw[6]=t[0],this.raw[7]=t[1],this.raw[8]=t[2]}}],[{key:"dot",value:function(t,e){var r=t[0]*e[0]+t[1]*e[1]+t[2]*e[2];return console.log(r),r}},{key:"multiply",value:function(e,r){var n=new Float32Array(9);n[0]=t.dot(e.column1,r.row1),n[1]=t.dot(e.column2,r.row1),n[2]=t.dot(e.column3,r.row1),n[3]=t.dot(e.column1,r.row2),n[4]=t.dot(e.column2,r.row2),n[5]=t.dot(e.column3,r.row2),n[6]=t.dot(e.column1,r.row3),n[7]=t.dot(e.column2,r.row3),n[8]=t.dot(e.column3,r.row3);var a=new t;return a.setMatrix(n),a}}]),t}(),Matrix4=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.identity();classCallCheck(this,t),this.setMatrix(e)}return createClass(t,[{key:"setMatrix",value:function(t){this.raw=t}},{key:"transpose",value:function(){var t=[this.raw[0],this.raw[1],this.raw[2],this.raw[3]],e=[this.raw[4],this.raw[5],this.raw[6],this.raw[7]],r=[this.raw[8],this.raw[9],this.raw[10],this.raw[11]],n=[this.raw[12],this.raw[13],this.raw[14],this.raw[15]];this.raw[0]=t[0],this.raw[4]=t[1],this.raw[8]=t[2],this.raw[12]=t[3],this.raw[1]=e[0],this.raw[5]=e[1],this.raw[9]=e[2],this.raw[13]=e[3],this.raw[2]=r[0],this.raw[6]=r[1],this.raw[10]=r[2],this.raw[14]=r[3],this.raw[3]=n[0],this.raw[7]=n[1],this.raw[11]=n[2],this.raw[15]=n[3]}},{key:"multiply",value:function(e){t.multiply(this,e,this)}}],[{key:"identity",value:function(){return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},{key:"dot",value:function(t,e,r,n,a,i,o,s){return t*a+e*i+r*o+n*s}},{key:"multiply",value:function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new t,a=new Float32Array(16);return a[0]=t.dot(e.raw[0],e.raw[4],e.raw[8],e.raw[12],r.raw[0],r.raw[1],r.raw[2],r.raw[3]),a[1]=t.dot(e.raw[1],e.raw[5],e.raw[9],e.raw[13],r.raw[0],r.raw[1],r.raw[2],r.raw[3]),a[2]=t.dot(e.raw[2],e.raw[6],e.raw[10],e.raw[14],r.raw[0],r.raw[1],r.raw[2],r.raw[3]),a[3]=t.dot(e.raw[3],e.raw[7],e.raw[11],e.raw[15],r.raw[0],r.raw[1],r.raw[2],r.raw[3]),a[4]=t.dot(e.raw[0],e.raw[4],e.raw[8],e.raw[12],r.raw[4],r.raw[5],r.raw[6],r.raw[7]),a[5]=t.dot(e.raw[1],e.raw[5],e.raw[9],e.raw[13],r.raw[4],r.raw[5],r.raw[6],r.raw[7]),a[6]=t.dot(e.raw[2],e.raw[6],e.raw[10],e.raw[14],r.raw[4],r.raw[5],r.raw[6],r.raw[7]),a[7]=t.dot(e.raw[3],e.raw[7],e.raw[11],e.raw[15],r.raw[4],r.raw[5],r.raw[6],r.raw[7]),a[8]=t.dot(e.raw[0],e.raw[4],e.raw[8],e.raw[12],r.raw[8],r.raw[9],r.raw[10],r.raw[11]),a[9]=t.dot(e.raw[1],e.raw[5],e.raw[9],e.raw[13],r.raw[8],r.raw[9],r.raw[10],r.raw[11]),a[10]=t.dot(e.raw[2],e.raw[6],e.raw[10],e.raw[14],r.raw[8],r.raw[9],r.raw[10],r.raw[11]),a[11]=t.dot(e.raw[3],e.raw[7],e.raw[11],e.raw[15],r.raw[8],r.raw[9],r.raw[10],r.raw[11]),a[12]=t.dot(e.raw[0],e.raw[4],e.raw[8],e.raw[12],r.raw[12],r.raw[13],r.raw[14],r.raw[15]),a[13]=t.dot(e.raw[1],e.raw[5],e.raw[9],e.raw[13],r.raw[12],r.raw[13],r.raw[14],r.raw[15]),a[14]=t.dot(e.raw[2],e.raw[6],e.raw[10],e.raw[14],r.raw[12],r.raw[13],r.raw[14],r.raw[15]),a[15]=t.dot(e.raw[3],e.raw[7],e.raw[11],e.raw[15],r.raw[12],r.raw[13],r.raw[14],r.raw[15]),n.setMatrix(a),n}},{key:"multiplyVector",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Vector3;return r.set(e[0]*t.raw[0],e[1]*t.raw[1],e[2]*t.raw[2],e[3]*t.raw[3],e[4]*t.raw[0],e[5]*t.raw[1],e[6]*t.raw[2],e[7]*t.raw[3],e[8]*t.raw[0],e[9]*t.raw[1],e[10]*t.raw[2],e[11]*t.raw[3],e[12]*t.raw[0],e[13]*t.raw[1],e[14]*t.raw[2],e[15]*t.raw[3]),r}},{key:"translate",value:function(t){}},{key:"scale",value:function(t){}}]),t}(),hexString="0123456789abcdef",Generate=function(){function t(){classCallCheck(this,t)}return createClass(t,null,[{key:"RandomHexString",value:function(t){for(var e="",r=0;r<t;r++)e+=hexString.substr(Math.floor(Math.random()*hexString.length),1);return e}},{key:"UUID",value:function(){return t.RandomHexString(8)+"-"+t.RandomHexString(4)+"-"+t.RandomHexString(4)+"-"+t.RandomHexString(4)+"-"+t.RandomHexString(12)}}]),t}(),pools=new Object,objectPool=new Object,clean=new Object,Pool=function(){function t(){classCallCheck(this,t)}return createClass(t,null,[{key:"allocate",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t){return t};if(!t.hasOwnProperty("prototype"))throw new Error("Object must have a constructor");pools[e]={object:t,objectKey:e,cleaner:r},clean[e]=r,objectPool[e]=[]}},{key:"deallocate",value:function(t){delete clean[t],delete objectPool[t],delete pools[t]}},{key:"referencesInPool",value:function(e){return pools[e].size-t.poolsize(e)}},{key:"poolsize",value:function(t){return objectPool[t].length}},{key:"getObject",value:function(t){if(objectPool[t].length>0)return objectPool[t].pop();var e=new pools[t].object;return e.v_pool_key=t,e}},{key:"returnObject",value:function(t){clean[t.v_pool_key](t),objectPool[t.v_pool_key].push(t)}},{key:"returnObjects",value:function(e){for(var r=0;r<e.length;r++)t.returnObject(e[r])}},{key:"pools",get:function(){return pools}}]),t}(),listeners={},EventLite=function(){function t(){classCallCheck(this,t)}return createClass(t,null,[{key:"on",value:function(t,e){return void 0===listeners[t]?listeners[t]=[e]:listeners[t].push(e),e}},{key:"off",value:function(t,e){if(listeners[t])for(var r=listeners[t].length-1;r>=0;r--){if(1!==listeners[t].length){listeners[t].splice(r,1);break}delete listeners[t]}}},{key:"trigger",value:function(t){if(listeners[t]){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];for(var a=listeners[t].length-1;a>=0;a--)if(void 0!==listeners[t]){if("function"!=typeof listeners[t][a]||!listeners[t][a])throw"Event handler is not a function.";listeners[t][a](r)}}}},{key:"unbindAll",value:function(){for(var t in listeners)delete listeners[t];return!0}}]),t}(),resizeId=void 0,resizeEvent=void 0,Screen=function(){function t(){classCallCheck(this,t)}return createClass(t,null,[{key:"resize",value:function(e){clearTimeout(resizeId),resizeEvent=e,resizeId=setTimeout(t.recalculate,t.resizeDelay)}},{key:"recalculate",value:function(){t.dimensions.set(window.innerWidth,window.innerHeight),t.dimensions.x>t.dimensions.y?t.orientation="landscape":t.orientation="portrait";for(var e in t.anchors)t.anchors.hasOwnProperty(e)&&t.anchorPositions[e].set(t.anchors[e].x*t.dimensions.x,t.anchors[e].y*t.dimensions.y);EventLite.trigger("resize",resizeEvent)}},{key:"getAnchor",value:function(e){return t.anchorPositions[e].get()}},{key:"setAnchor",value:function(e,r,n){void 0==t.anchors[e]?(t.anchors[e]=new Vector3(r,n),t.anchorPositions[e]=new Vector3(t.anchors[e].x*t.dimensions.x,t.anchors[e].y*t.dimensions.y)):(t.anchors[e].set(r,n),t.anchorPositions[e].set(t.anchors[e].x*t.dimensions.x,t.anchors[e].y*t.dimensions.y))}},{key:"removeAnchor",value:function(e){delete t.anchors[e],delete t.anchorPositions[e]}},{key:"init",value:function(){t.resizeDelay=100,t.anchors={},t.anchorPositions={},t.dimensions=new Vector3(window.innerWidth,window.innerHeight),t.setAnchor("center",.5,.5),t.dimensions.x>t.dimensions.y?t.orientation="landscape":t.orientation="portrait"}},{key:"dimensions",get:function(){return t._dimensions},set:function(e){t._dimensions!=e&&(t._dimensions=e)}},{key:"orientation",get:function(){return t._orientation},set:function(e){t._orientation!=e&&(t._orientation=e)}},{key:"center",get:function(){return t._center},set:function(e){t._center!=e&&(t._center=e)}},{key:"resizeDelay",get:function(){return t._resizeDelay},set:function(e){t._resizeDelay!=e&&(t._resizeDelay=e)}},{key:"anchors",get:function(){return t._anchors},set:function(e){t._anchors!=e&&(t._anchors=e)}},{key:"anchorPositions",get:function(){return t._anchorPositions},set:function(e){t._anchorPositions!=e&&(t._anchorPositions=e)}},{key:"width",get:function(){return t._dimensions.x}},{key:"height",get:function(){return t._dimensions.y}}]),t}();Screen.init();var key=Generate.UUID(),Behavior=function(){function t(){classCallCheck(this,t)}return createClass(t,null,[{key:"init",value:function(){Pool.allocate(Vector3,key,Vector3.reset)}},{key:"seek",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=Pool.getObject(key),a=Pool.getObject(key);Vector3.subtract(e,t.location,n),n.normalize(),n.multiply(t.maxSpeed),Vector3.subtract(n,t.velocity,a),a.limit(t.maxForce),a.multiply(r),t.addForce(a),Pool.returnObject(n),Pool.returnObject(a)}},{key:"arrive",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=Pool.getObject(key),i=Pool.getObject(key);Vector3.subtract(e,t.location,a);var o=Convert.MapRange(a.magnitude(),0,r,0,t.maxSpeed);a.normalize(),a.multiply(o),Vector3.subtract(a,t.velocity,i),i.limit(t.maxForce),i.multiply(n),t.addForce(i),Pool.returnObject(a),Pool.returnObject(i)}},{key:"avoidAll",value:function(t,e){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:80,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=Pool.getObject(key),i=Pool.getObject(key),o=Pool.getObject(key),s=0,u=0;u<e.length;u++){var l=e[u],c=Vector3.dist(t.location,l.location);c>0&&c<r&&t.id!=l.id&&(Vector3.subtract(t.location,l.location,a),a.normalize(),a.divide(c),o.add(a),s++)}s>0&&(o.divide(s),o.normalize(),o.multiply(t.maxSpeed),Vector3.subtract(o,t.velocity,i),i.limit(t.maxForce),i.multiply(n),t.addForce(i)),Pool.returnObject(a),Pool.returnObject(i),Pool.returnObject(o)}},{key:"avoid",value:function(t,e,r){this.avoidAll(t,[e],r)}},{key:"constrain",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Screen.width,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Screen.height,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;e-=i,n+=i,r-=i,a+=i,t.location.x<e&&(t.velocity.x*=-1,t.location.x=e),t.location.y<r&&(t.velocity.y*=-1,t.location.y=r),t.location.x>n&&(t.velocity.x*=-1,t.location.x=n),t.location.y>a&&(t.velocity.y*=-1,t.location.y=a)}},{key:"wrap",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Screen.width,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Screen.height,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;e-=i,n+=i,r-=i,a+=i,t.location.x<e&&(t.location.x=n),t.location.y<r&&(t.location.y=a),t.location.x>n&&(t.location.x=e),t.location.y>a&&(t.location.y=r)}},{key:"disableOutside",value:function(t,e,r,n,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;e-=i,n+=i,r-=i,a+=i,(t.location.x<e||t.location.y<r||t.location.x>n||t.location.y>a)&&(t.active=!1,t.visible=!1)}},{key:"destroyOutside",value:function(t,e,r,n,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;e-=i,n+=i,r-=i,a+=i,(t.location.x<e||t.location.y<r||t.location.x>n||t.location.y>a)&&(t.dead=!0)}}]),t}();Behavior.init();var Actor=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Actor",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Vector3(0,0,0);classCallCheck(this,t),this.type=e,this.active=!0,this.visible=!0,this.dead=!1,this.id=Generate.UUID(),this.location=r,this.velocity=new Vector3(0,0,0),this.acceleration=new Vector3(0,0,0),this.angle=0,this.maxSpeed=15,this.maxForce=1}return createClass(t,[{key:"addForce",value:function(t){this.acceleration.add(t)}},{key:"update",value:function(){this.active&&(this.move(),this.velocity.add(this.acceleration),this.location.add(this.velocity),this.acceleration.set(0,0,0))}},{key:"move",value:function(){}},{key:"render",value:function(){this.visible&&this.draw()}},{key:"draw",value:function(){}},{key:"destroy",value:function(){this.dead=!0}}]),t}(),DOMActor=function(t){function e(t,r){classCallCheck(this,e);var n=possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r));return n.element=document.createElement("div"),n.element.classList.add("actor"),n.element.classList.add(t),n.parentElement=null,n}return inherits(e,t),createClass(e,[{key:"addToParentElement",value:function(t){this.parentElement=t,this.parentElement.appendChild(this.element)}},{key:"draw",value:function(){this.element.style.transform="translateX("+this.location.x+"px) translateY("+this.location.y+"px) rotate("+this.angle+"deg)"}},{key:"destroy",value:function(){this.dead=!0,this.element.remove(),this.parentElement=null}}]),e}(Actor),GameLoop=function(){function t(){classCallCheck(this,t),this.gameObjects=[],this.controller=[]}return createClass(t,[{key:"setController",value:function(t){this.controller.push(t)}},{key:"getType",value:function(t){for(var e=[],r=0;r<this.gameObjects.length;r++)this.gameObjects[r].type===t&&e.push(this.gameObjects[r]);return e}},{key:"update",value:function(){this.removeActors();for(var t=0;t<this.gameObjects.length;t++)this.gameObjects[t].update()}},{key:"addActor",value:function(t){this.gameObjects.push(t)}},{key:"removeActors",value:function(){for(var t=0;t<this.gameObjects.length;t++)this.gameObjects[t].dead&&this.gameObjects.splice(t,1)}},{key:"render",value:function(){for(var t=0;t<this.gameObjects.length;t++)this.gameObjects[t].render()}},{key:"loop",value:function(){this.update(),this.render(),window.requestAnimationFrame(this.loop.bind(this))}}]),t}(),InputController=function(){function t(){classCallCheck(this,t),this.keyMap={},this.mousePos=new Vector3}return createClass(t,[{key:"bindEvents",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;t.addEventListener("mouseup",this.setMouseUp.bind(this)),t.addEventListener("mousedown",this.setMouseDown.bind(this)),t.addEventListener("mousemove",this.setMousePos.bind(this)),t.addEventListener("keyup",this.mapKeys.bind(this)),t.addEventListener("keydown",this.mapKeys.bind(this))}},{key:"unbindEvents",value:function(){target.removeEventListener("mouseup",this.setMouseUp.bind(this)),target.removeEventListener("mousedown",this.setMouseDown.bind(this)),target.removeEventListener("mousemove",this.setMousePos.bind(this)),target.removeEventListener("keyup",this.mapKeys.bind(this)),target.removeEventListener("keydown",this.mapKeys.bind(this))}},{key:"setMousePos",value:function(t){this.mousePos.set(t.pageX,t.pageY)}},{key:"setMouseUp",value:function(t){var e={key:"mouse"+t.button,type:"keyup"};this.mapKeys(e)}},{key:"setMouseDown",value:function(t){var e={key:"mouse"+t.button,type:"keydown"};this.mapKeys(e)}},{key:"mapKeys",value:function(t){t=t||event,this.keyMap[t.key]="keydown"==t.type}},{key:"keyUp",value:function(t){console.log(t)}},{key:"keyDown",value:function(t){console.log(t)}},{key:"setKeys",value:function(){for(var t in this.keyMap)this.keyMap[t]?this.keyDown(t):this.keyUp(t)}}]),t}();exports.Vector2=Vector2,exports.Vector3=Vector3,exports.Matrix3=Matrix3,exports.Matrix4=Matrix4,exports.Behaviors=Behavior,exports.Actor=Actor,exports.DOMActor=DOMActor,exports.GameLoop=GameLoop,exports.Screen=Screen,exports.InputController=InputController,exports.EventLite=EventLite,exports.Pool=Pool,exports.Convert=Convert,exports.Generate=Generate;